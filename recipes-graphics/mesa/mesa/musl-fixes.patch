From f892cf9ebd7dbb5b5d30d3240bfa679b51bd8465 Mon Sep 17 00:00:00 2001
From: Andre McCurdy <armccurdy@gmail.com>
Date: Fri, 19 Jun 2015 20:21:18 -0700
Subject: [PATCH] musl fixes

Use PTHREAD_MUTEX_RECURSIVE iso PTHREAD_MUTEX_RECURSIVE_NP.

Signed-off-by: Andre McCurdy <armccurdy@gmail.com>
---
 include/c11/threads_posix.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/include/c11/threads_posix.h b/include/c11/threads_posix.h
index f9c165d..cdf6820 100644
--- a/include/c11/threads_posix.h
+++ b/include/c11/threads_posix.h
@@ -178,7 +178,7 @@ mtx_init(mtx_t *mtx, int type)
         return thrd_error;
     pthread_mutexattr_init(&attr);
     if ((type & mtx_recursive) != 0) {
-#if defined(__linux__) || defined(__linux)
+#if defined(__GLIBC__)
         pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE_NP);
 #else
         pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE);
-- 
1.9.1

